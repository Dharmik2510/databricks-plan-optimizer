# ============================================================================
# Production Environment Configuration
# ============================================================================

# ----------------------------------------------------------------------------
# OpenAI Configuration (Required for Semantic Matching)
# ----------------------------------------------------------------------------
# Get your API key from: https://platform.openai.com/api-keys
# Cost: ~$0.01-$0.20/month for typical repositories
OPENAI_API_KEY=sk-proj-your-actual-key-here

# ----------------------------------------------------------------------------
# ChromaDB Configuration (Optional but Recommended for Production)
# ----------------------------------------------------------------------------

# Option 1: Local Docker (Recommended for Self-Hosted)
# Start with: docker-compose -f docker-compose.chroma.yml up -d
CHROMA_URL=http://localhost:8000

# Option 2: ChromaDB Cloud
# Sign up at: https://www.trychroma.com/cloud
# CHROMA_URL=https://api.trychroma.com
# CHROMA_API_KEY=your-cloud-api-key
# CHROMA_TENANT=your-database-id
# CHROMA_DATABASE=default

# Option 3: In-Memory (Development Only - NOT for Production)
# Leave CHROMA_URL commented out to use in-memory storage
# CHROMA_URL=

# ----------------------------------------------------------------------------
# Feature Flags
# ----------------------------------------------------------------------------
ENABLE_SEMANTIC_MATCHING=true
ENABLE_PARALLEL_PROCESSING=true
ENABLE_AST_PARSING=true

# ----------------------------------------------------------------------------
# Performance Tuning
# ----------------------------------------------------------------------------
# Number of parallel workers (default: CPU count)
MAX_CONCURRENT_FILES=8

# Confidence threshold (0-100)
CONFIDENCE_THRESHOLD=40

# Request timeout (milliseconds)
ANALYSIS_TIMEOUT=300000

# ----------------------------------------------------------------------------
# Database Configuration
# ----------------------------------------------------------------------------
DATABASE_URL="postgresql://user:password@localhost:5432/databricks_optimizer?schema=public"

# ----------------------------------------------------------------------------
# JWT Configuration
# ----------------------------------------------------------------------------
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=7d

# ----------------------------------------------------------------------------
# Server Configuration
# ----------------------------------------------------------------------------
PORT=3002
NODE_ENV=production
CORS_ORIGIN=http://localhost:3000

# ----------------------------------------------------------------------------
# Monitoring & Observability
# ----------------------------------------------------------------------------
# Prometheus metrics available at: http://localhost:3002/metrics
ENABLE_METRICS=true

# Log level: error | warn | info | debug
LOG_LEVEL=info

# ----------------------------------------------------------------------------
# Optional: Advanced ChromaDB Settings
# ----------------------------------------------------------------------------
# CHROMA_COLLECTION_NAME=code_functions
# CHROMA_BATCH_SIZE=512
# CHROMA_MAX_RETRIES=3

# ----------------------------------------------------------------------------
# Optional: ChromaDB Authentication (Docker)
# ----------------------------------------------------------------------------
# CHROMA_AUTH_TOKEN=your-secret-token-here

# ============================================================================
# End of Configuration
# ============================================================================
